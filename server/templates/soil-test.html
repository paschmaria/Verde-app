{% extends 'base_dashboard.html' %} {% load staticfiles %} {% block body %}
<div class="my-3 my-md-5">
  <div class="container">
    <div class="row">
      <div class="col-md-3">
        <h3 class="page-title mb-5">Soil Analysis And Recommendations</h3>
        <div>
          <div class="list-group list-group-transparent mb-0">
            <a href="{% url 'nutrient' %}" class="list-group-item list-group-item-action d-flex align-items-center">
              <span class="icon mr-3">
                <i class="fe fe-file-text"></i>
              </span>Nutrient Management Guide
            </a>
            <a href="{% url 'resources' %}" class="list-group-item list-group-item-action d-flex align-items-center">
              <span class="icon mr-3">
                <i class="fe fe-book"></i>
              </span>Crop/Soil Management Resources
            </a>
          </div>
          <div class="mt-6 mb-6">
            <a href="{% url 'soil-test' %}" class="btn btn-secondary btn-block">Conduct Fresh Analysis</a>
          </div>
        </div>
      </div>
      <div class="col-md-9">
        <form action="" method="post" class="card">
          {% csrf_token %}
          <div class="card-header">
            <h3 class="card-title">Soil Test/Analysis</h3>
          </div>
          <div class="card-body">
            <div class="row">
              <div class="col-lg-6 col-md-6">
                <h3>Farm Information</h3>
                <div class="form-group">
                  <label class="form-label">Farmer Name
                    <span class="form-required">*</span>
                  </label>
                  <div class="row gutters-xs">
                    <div class="col-12">
                      <input type="text" id="name" name="farmer" class="form-control" required>
                    </div>
                  </div>

                  <script>
                    require(['jquery', 'selectize'], function ($, selectize) {

                      $('#name').selectize({
                        maxItems: 1,
                        valueField: 'id',
                        labelField: 'name',
                        searchField: ['name'],
                        options: {{ farmers_names| safe }},
                      render: {
                        item: function (item, escape) {
                          console.log(item, escape)
                          return '<div>' +
                            (item.name ? '<span class="name">' + escape(item.name) + '</span>' : '') + '</div>';
                        },
                        option: function (item, escape) {
                          console.log(item, escape)
                          var label = item.name;
                          //var caption = item.name ? item.id : null;
                          return '<div>' +
                            '<span class="label">' + escape(label) + '</span>' + '</div>';
                        }
                      },
                        
                      });
                    })
                  </script>

                </div>
                <div class="form-group">
                  <label class="form-label">Farm Location
                    <span class="form-required">*</span>
                  </label>
                  <div class="row gutters-xs">
                    <div class="col-4">
                       <select name="state" id="id_state" onChange="updateLgaSelect(this.value)" class="form-control custom-select" required>
                        <option value="">Select state</option>
                        {% for state in state_data %}
                          <option value="{{ state.state.id }}">{{ state.state.name }}</option>
                        {% endfor %}
                      </select>
                    </div>
                    <div class="col-4">
                      <select name="lga" id="id_lga" class="form-control custom-select" required>
                        <option value="">Select LGA</option>
                      </select>
                    </div>
                    <div class="col-4">
                      <input type="text" name="town" class="form-control" autocomplete="off" required>
                    </div>
                  </div>
                </div>

                <div class="form-group">
                  <label class="form-label">Ecological zone(s)
                    <!-- <span class="form-required">*</span> -->
                  </label>
                  <div class="row gutters-xs">
                    <div class="col-12">
                      <input type="text" id="zone" name="zone" class="form-control" aria-label="ecological zones" readonly>
                    </div>
                  </div>
                  <script src="{% static 'assets/js/agro_zones.js'%}"></script>
                  <script>
                      data = {{ state_data|safe }}
                  </script>
                  <script src="{% static 'assets/js/lga.js'%}"></script>
                </div>

                <div class="form-group">
                  <label class="form-label">Farm Size
                    <span class="form-required">*</span>
                  </label>
                  <div class="input-group">
                    <input type="number" name="land_value" class="form-control" aria-label="Text input with select dropdown" required>
                    <div class="input-group-append">
                      <select name="land_unit" class="form-control custom-select" required>
                        <option value="1">Acre</option>
                        <option value="2">Hectare</option>
                        <option value="3">Square Metre</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">Date of last Fertilizer application
                    <span class="form-required">*</span>
                  </label>
                  <div class="row gutters-xs">
                    <div class="col-5">
                      <select name="fertilizer_month" class="form-control custom-select" required>
                        <option value="">Month</option>
                        <option value="1">January</option>
                        <option value="2">February</option>
                        <option value="3">March</option>
                        <option value="4">April</option>
                        <option value="5">May</option>
                        <option value="6">June</option>
                        <option value="7">July</option>
                        <option value="8">August</option>
                        <option value="9">September</option>
                        <option value="10">October</option>
                        <option value="11">November</option>
                        <option value="12">December</option>
                      </select>
                    </div>
                    <div class="col-3">
                      <select name="fertilizer_day" class="form-control custom-select" required>
                        <option value="">Day</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="11">11</option>
                        <option value="12">12</option>
                        <option value="13">13</option>
                        <option value="14">14</option>
                        <option value="15">15</option>
                        <option value="16">16</option>
                        <option value="17">17</option>
                        <option value="18">18</option>
                        <option value="19">19</option>
                        <option value="20">20</option>
                        <option value="21">21</option>
                        <option value="22">22</option>
                        <option value="23">23</option>
                        <option value="24">24</option>
                        <option value="25">25</option>
                        <option value="26">26</option>
                        <option value="27">27</option>
                        <option value="28">28</option>
                        <option value="29">29</option>
                        <option value="30">30</option>
                        <option value="31">31</option>
                      </select>
                    </div>
                    <div class="col-4">
                      <select name="fertilizer_year" class="form-control custom-select" required>
                        <option value="">Year</option>
                        <option value="2018">2018</option>
                        <option value="2017">2017</option>
                        <option value="2016">2016</option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">Type of Soil Tillage
                    <span class="form-required">*</span>
                  </label>
                  <select name="soil_tillage" class="form-control custom-select" required>
                    <option value="">Choose type</option>
                    <option value="conventional">Conventional Tillage</option>
                    <option value="conservation">Conservation Tillage</option>
                    <option value="no-till">No-till</option>
                  </select>
                </div>
                <div class="form-group">
                  <label class="form-label">Planted Crop(s)
                    <span class="form-required">*</span>
                  </label>
                  <input type="text" class="form-control" name="planted_crops" id="input-tags" value="Wheat" required>
                </div>
                <script>
                  require(['jquery', 'selectize'], function ($, selectize) {
                    $('#input-tags').selectize({
                      plugins: ['remove_button'],
                      delimiter: ',',
                      persist: false,
                      create: function (input) {
                        return {
                          value: input,
                          text: input
                        }
                      }
                    });
                  });
                </script>
              </div>
              <div class="col-lg-6 col-md-6">
                <h3>Sample Information</h3>
                <div class="row">
                  <div class="col-lg-6 col-md-12">
                    <div class="form-group">
                      <label class="form-label">Amt. of Samples Collected</label>
                      <input type="number" name="sample_amount" class="form-control" required>
                    </div>
                  </div>
                  <div class="col-lg-6 col-md-12">
                    <div class="form-group">
                      <label class="form-label">Av. Sample Size
                        <span class="form-required">*</span>
                      </label>
                      <div class="input-group">
                        <input type="number" step="0.01" name="sample_size" class="form-control" aria-label="Text input with select dropdown" required>
                        <div class="input-group-append">
                          <select name="sample_unit" class="form-control custom-select" required>
                            <option value="1">mg</option>
                            <option value="2">g</option>
                            <option value="3">kg</option>
                          </select>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">Sampled Soil Depth (inches)
                    <span class="form-required">*</span>
                  </label>
                  <div>
                    <label class="custom-control custom-checkbox custom-control-inline">
                      <input type="checkbox" class="custom-control-input" name="soil_depth" value="0_15">
                      <span class="custom-control-label">0-15</span>
                    </label>
                    <label class="custom-control custom-checkbox custom-control-inline">
                      <input type="checkbox" class="custom-control-input" name="soil_depth" value="15.1_30">
                      <span class="custom-control-label">15.1-30</span>
                    </label>
                    <label class="custom-control custom-checkbox custom-control-inline">
                      <input type="checkbox" class="custom-control-input" name="soil_depth" value="30.1_45">
                      <span class="custom-control-label">30.1-45</span>
                    </label>
                    <label class="custom-control custom-checkbox custom-control-inline">
                      <input type="checkbox" class="custom-control-input" name="soil_depth" value="_45">
                      <span class="custom-control-label">>45</span>
                    </label>
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">Sampled Soil Types
                    <span class="form-required">*</span>
                  </label>
                  <select name="soil_type" class="form-control custom-select" required="">
                    <option value="">Choose type</option>
                    <option value="clay">Clay</option>
                    <option value="loam">Loam</option>
                    <option value="sand">Sand</option>
                    <option value="silt">Silt</option>
                    <option value="sandy_clay">Sandy Clay</option>
                    <option value="silty_clay">Silty Clay</option>
                    <option value="clay_loam">Clay Loam</option>
                    <option value="loamy_sand">Loamy Sand</option>
                    <option value="sandy_loam">Sandy Loam</option>
                    <option value="silt_loam">Silt Loam</option>
                    <option value="silt_clay_loam">Silt Clay Loam</option>
                    <option value="sandy_clay_loam">Sandy Clay Loam</option>
                  </select>
                </div>
                <div class="form-group">
                  <label class="form-label">Soil pH
                    <span class="form-required">*</span>
                  </label>
                  <div class="row">
                    <div class="col">
                      <input type="range" id="pHRange" class="form-control custom-range" step="0.2" min="0" max="14">
                    </div>
                    <div class="col">
                      <input type="number" name="soil_ph" id="pHBox" class="form-control" value="14" required>
                    </div>
                  </div>
                </div>
                <script>
                  var slider = document.getElementById("pHRange");
                  var output = document.getElementById("pHBox");
                  output.value = slider.value;
                  slider.oninput = function () {
                    output.value = this.value;
                  }
                  output.oninput = function () {
                    slider.value = this.value;
                  }
                </script>
                <h3>Soil Nutrient Element Ratings</h3>
                <div class="form-group">
                  <label class="form-label">Nitrogen (g/kg)
                    <span class="form-required">*</span>
                  </label>
                  <div class="selectgroup w-100">
                    <label class="selectgroup-item">
                      <input type="radio" name="nitrogen" value="lowest" class="selectgroup-input" checked="">
                      <span class="selectgroup-button">
                        <0.5</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="nitrogen" value="low" class="selectgroup-input">
                      <span class="selectgroup-button">0.6 - 1.5</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="nitrogen" value="medium" class="selectgroup-input">
                      <span class="selectgroup-button">1.5 - 2.0</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="nitrogen" value="high" class="selectgroup-input">
                      <span class="selectgroup-button">>2.0</span>
                    </label>
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">Phosphorus (Bray-1-P) (mg/kg)
                    <span class="form-required">*</span>
                  </label>
                  <div class="selectgroup w-100">
                    <label class="selectgroup-item">
                      <input type="radio" name="phosphorus" value="lowest" class="selectgroup-input" checked="">
                      <span class="selectgroup-button">
                        <3.0</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="phosphorus" value="low" class="selectgroup-input">
                      <span class="selectgroup-button">3.0 - 7.0</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="phosphorus" value="medium" class="selectgroup-input">
                      <span class="selectgroup-button">8.0 - 20</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="phosphorus" value="high" class="selectgroup-input">
                      <span class="selectgroup-button">>20</span>
                    </label>
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">Potassium (Exc. K) (cmol/kg)
                    <span class="form-required">*</span>
                  </label>
                  <div class="selectgroup w-100">
                    <label class="selectgroup-item">
                      <input type="radio" name="potassium" value="lowest" class="selectgroup-input" checked="">
                      <span class="selectgroup-button">
                        <0.2</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="potassium" value="low" class="selectgroup-input">
                      <span class="selectgroup-button">0.21 - 0.3</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="potassium" value="medium" class="selectgroup-input">
                      <span class="selectgroup-button">0.31 - 0.6</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="potassium" value="high" class="selectgroup-input">
                      <span class="selectgroup-button">>0.6</span>
                    </label>
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">Organic Carbon (g/kg)
                    <span class="form-required">*</span>
                  </label>
                  <div class="selectgroup w-100">
                    <label class="selectgroup-item">
                      <input type="radio" name="carbon" value="lowest" class="selectgroup-input" checked="">
                      <span class="selectgroup-button">
                        <4.0</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="carbon" value="low" class="selectgroup-input">
                      <span class="selectgroup-button">4.0 - 10</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="carbon" value="medium" class="selectgroup-input">
                      <span class="selectgroup-button">10 - 14</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="carbon" value="high" class="selectgroup-input">
                      <span class="selectgroup-button">>14</span>
                    </label>
                  </div>
                </div>
                <div class="form-group">
                  <label class="form-label">Zinc (DPTA) (mg/kg)
                    <span class="form-required">*</span>
                  </label>
                  <div class="selectgroup w-100">
                    <label class="selectgroup-item">
                      <input type="radio" name="zinc" value="lowest" class="selectgroup-input" checked="">
                      <span class="selectgroup-button">0</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="zinc" value="low" class="selectgroup-input">
                      <span class="selectgroup-button">
                        <1.0</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="zinc" value="medium" class="selectgroup-input">
                      <span class="selectgroup-button">1.0 - 5.0</span>
                    </label>
                    <label class="selectgroup-item">
                      <input type="radio" name="zinc" value="high" class="selectgroup-input">
                      <span class="selectgroup-button">>5.0</span>
                    </label>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="card-footer text-right">
            <button type="submit" class="btn btn-primary">Submit</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}